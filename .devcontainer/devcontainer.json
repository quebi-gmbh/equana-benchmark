{
  "name": "Dev Container Template",
  "image": "mcr.microsoft.com/devcontainers/typescript-node",
  "remoteUser": "node",
  "workspaceFolder": "/workspace",
  "workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind",
  "customizations": {
    "vscode": {
      "extensions": [
        "anthropic.claude-code",
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode"
      ],
      "settings": {
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "terminal.integrated.defaultProfile.linux": "bash"
      }
    }
  },
  "initializeCommand": "REPO=$(basename \"$PWD\") && mkdir -p \"$HOME/.claude/$REPO\" && [ ! -f \"$HOME/.claude/$REPO/.claude.json\" ] && cp -rn \"$HOME/.claude/\"* \"$HOME/.claude/$REPO/\" 2>/dev/null && cp -n \"$HOME/.claude.json\" \"$HOME/.claude/$REPO/.claude.json\" 2>/dev/null; true",
  "features": {
    "ghcr.io/devcontainers/features/github-cli:1": {},
    /*
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": "true",
      "upgradePackages": "true"
    },*/
    "ghcr.io/devcontainers/features/git:1": {}
    /*
    "ghcr.io/joedmck/devcontainer-features/wrangler:1": {
      "version": "latest"
    }*/
  },
  /* Install additional packages
  "postCreateCommand": "echo 'Post-create command executed!'",
  */
  /* Set environment variables 
  "containerEnv": {
    "MY_VAR": "var"
  },*/
  "mounts": [
    // change user "node" if needed, e.g. "vscode" for ubuntu-based images
    // mount Claude credentials (per-repo)
    "source=${localEnv:HOME}/.claude/${localWorkspaceFolderBasename},target=/home/node/.claude,type=bind,consistency=cached",
    "source=${localEnv:HOME}/.claude/${localWorkspaceFolderBasename}/.claude.json,target=/home/node/.claude.json,type=bind,consistency=cached",
    // mount GitHub CLI config
    "source=${localEnv:HOME}/.config/gh,target=/home/node/.config/gh,type=bind",
    // mount Git config
    "source=${localEnv:HOME}/.gitconfig,target=/home/node/.gitconfig,type=bind,readonly"
  ]
}
